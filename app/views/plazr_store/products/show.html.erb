<article id="product-show">

  <header class="row-fluid">
    <div class="span7">
      <h2><%= @product.name %></h2>
      <p><%= @product.rating %></p>
    </div>
    <div class="span5">
      <h2><%= @product.master_price %> €</h2>
    </div>
  </header>


  <div class="row-fluid">
    <div class="span6">

        <div id="page-wrap">
          <div class="slider-wrap">
            <div id="main-photo-slider" class="csw">
              <div class="panelContainer">
                
                <% @product.images.each_with_index do |im, index| %>
                  <div class="panel" title='Panel <%=index + 1 %>'>
                    <div class="wrapper">
                      <img src=<%=im.file%> alt="temp" />
                    </div>
                  </div>
                <% end %>
              </div>
            </div>

            <div id="movers-row">
              
              <% @product.images.each_with_index do |im, index| %>
                <div><a href="#<%=index + 1 %>" class="cross-link"><img src=<%=im.file%> class="nav-thumb" alt="temp-thumb" /></a></div>
              <% end %>
              
            </div>
          </div>
        </div>
      </div>
      <div class="span3">
        <% if !@product.variants_without_master.empty? %>
        <p>Variantes:</p>
        <select>
          <% @product.variants_without_master.each do |v| %>
          <% v.variant_property_values.each_with_index do |vpv, index| %>
          <option><%= index%> - <%vpv.variant_property.display_name%> - <%= vpv.presentation%></option>
          <% end %>
          <% end %>
        </select>
        <% end %>
        <p>Quantidade:</p>
        <input type="number" value="Quantity" />
        <dl>
          <dt>Descrição</dt>
          <dd><%= @product.details %></dd>
          <dt>Referência<dt>
          <dd><%= @product.master_variant.sku %></dd>
        </dl>
      </div>
      <div class="span3">
          <ul>
            <a href="#" class="btn btn-large btn-primary disabled">Add Cart</a>
            <a href="#" class="btn btn-large btn-primary disabled">Add Wishlist</a>
            <a href="#" class="btn btn-large btn-primary disabled">Add comment</a>
          </ul>
          <ul>
            <a href="#" class="btn btn-large btn-primary disabled">Share facebook</a>
            <a href="#" class="btn btn-large btn-primary disabled">Share twiter</a>
            <a href="#" class="btn btn-large btn-primary disabled">Share google</a>
          </ul>
      </div>

    </div>

    <% if @product.related.size > 0 %>
      <section>

        <div>
          <div class="row">
            <div class="span9" align="center">
              <h3>Artigos relacionados</h3>
            </div>
          </div>

          <!--Não consigo validar porque a base de dados nao esta povoada-->
            <div class="row">
              <% @products.related.each do |product| %>
                <%= render 'plazr_store/shared/thumb-item', recommended: product %>
              <% end %>
            </div>

        </div>
      </section>
    <%end%>

    <% if !@product.comments.empty? %>
    <section>
      <div class="row-fluid">
        <div class="span11">
          <h1>Comentários</h1>
        </div>
      </div>

      <% @product.comments.each do |c| %>
      <div class="row-fluid">
        <div class="span4">
          <h3>Nome</h3>
          <p><%= PlazrAuth::User.find(@product.id).first_name %></p>
          <p><%= c.rating %></p>
        </div>

        <div class="span5">
          <p><%= c.comment %></p>
        </div>
      </div>
      <% end %>
    </section>
    <% end %>
  </article>
