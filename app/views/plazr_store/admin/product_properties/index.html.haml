%h1 Listing Product Properties
%table
  %thead
    %tr
      %th Id Name
      %th Display Name
      %th Value
  %tbody
    = form_for([:admin, @product, @property], :url => admin_product_product_properties_path(@product), :method => :post) do |f|
      %p#notice
        = notice
      - if @property.errors.any?
        #error_explanation
          %h2= "#{pluralize(@property.errors.count, "error")} prohibited this property from being saved:"
          %div{:class=>["alert","alert-error"]}
            %ul
              - @property.errors.full_messages.each do |msg|
                %li= msg

      - @product_properties.each do |product_property|

        %tr
          %td
            = hidden_field_tag 'pps['<<product_property.id.to_s<<'][property_id]',product_property.property_id
            = text_field_tag 'pps['<<product_property.id.to_s<<'][id_name]', product_property.property.id_name
          %td
            = text_field_tag 'pps['<<product_property.id.to_s<<'][display_name]', product_property.property.display_name
          %td
            = text_field_tag 'pps['<<product_property.id.to_s<<'][value]', product_property.value
          %td
            = link_to 'Destroy', admin_product_product_property_path(@product, product_property), :method => :delete, :data => { :confirm => 'Are you sure?' }
      %tr
        %td
          = f.text_field :id_name
        %td
          = f.text_field :display_name
        %td
          = f.fields_for :product_properties do |pp|
            = pp.text_field :value
            = pp.hidden_field :product_id, :value => @product.id
      %tr
        = f.submit "Update"
= link_to 'Back to products', admin_products_path
